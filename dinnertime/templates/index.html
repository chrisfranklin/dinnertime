{% extends 'layout_jumbo.html' %} <!-- Change to sitebase.html if you wish -->


  {% load i18n %}

  {% block jumbo_title %}
    TableSurf.in
  {% endblock %}

  {% block jumbo_tagline %}
    Put out the shout. Share the food about.
  {% endblock %}

  {% block extra_jumbo %} <!-- If using sitebase.html set to content, if using layout_jumbo.html set to extra_jumbo -->

    <!-- <div class="row">
      <div class="span2 offset4">
        <h2 class="btn btn-primary btn-large"> I'm eating </h2>
      </div>
      <div class="span2">
        <h2 class="btn btn-primary btn-large"> I'm cooking </h2>
      </div>
    </div> -->
    {% if not request.user %}
      <h3> We are currently cooking things up, please register your interest below </h3>
      <div>
        <form method="post" action="/interest/">{% csrf_token %}
          <h3><input type="email" placeholder="you@example.com" name="email" id="id_email" /></h3>
          <h3 class="hidden2 success">Success!</h3>
          <h3 class="hidden2 failure">Failure!</h3>
          <button  type="submit">Notify me!</button>
        </form>
      </div>
      </br></br>
    {% endif %}

  {% endblock %}

  {% block extra_body %}
    {% if request.user %}
      </hr>
      <div class="row">
        <div class="span6">
          <h2><i class="icon-bullhorn"></i> I'm cooking </h2>
          <form action='/meal/create/' method='post' encoding='utf-8'>
            <fieldset>
              <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='LOcjcIL8N7JsjzcuGvUFcJcgYWO8aIzw' /></div>
              

              <div id="div_id_when" class="control-group">
                <label for="id_when" class="control-label requiredField">
                When<span class="asteriskField">*</span></label>
                <div class="controls"><input id="id_when" type="text" class="datetimeinput" name="when" /> </div>
              </div>
              <div id="div_id_max_guests" class="control-group">
                <label for="id_max_guests" class="control-label requiredField">
                  Max guests<span class="asteriskField">*</span>
                </label>
                <div class="controls"><input id="id_max_guests" type="text" class="textinput textInput" value="4" name="max_guests" /> </div>
              </div>
              <div id="div_id_privacy" class="control-group">
                <label for="id_privacy" class="control-label requiredField">
                  Privacy<span class="asteriskField">*</span>
                </label>
                <div class="controls">
                  <select id="id_privacy" class="select" name="privacy">
                  <option value="PRIVATE" selected="selected">Invite Only</option>
                  <option value="PUBLIC">Public</option></select>
                </div>
              </div>

                <button class='btn btn-large btn-success' type='submit'>
                  
                    Create
                  
                </button>
            </fieldset>
          </form>
        </div>
        <div class="span6">
          <h2><i class="icon-food"></i> I'm hungry</h2>
        </div>
      </div>

      <!--</hr>
      
      </br></br></br></br></br></br>
      <ul class="masthead-links">
        <li>
          <a href="http://github.com/piemonster" >Piemonster</a>
        </li>
        <li>
          <a href="/admin/" >Admin</a>
        </li>
        <li>
          <a href="/" >Help</a>
        </li>
      </ul> -->
    {% endif %}
{% endblock %}

  {% block extra_js %}

    <script>
        $('form').submit(function (event) {
            if ($('#use-js:checked').length === 0) {
                //return false
            }
            event.preventDefault();
            $.post(this.action, {
                email: $('#id_email').val(),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
            },
            function (data) {
                console.log(data);
                if (data.success) {
                    $('.success').show();
                    $('.failure').hide();
                    //$('.once').hide();
                } else {
                    $('.success').hide();
                    $('.failure').show();
                }
            });
        });
    </script>

  {% endblock %}
          

